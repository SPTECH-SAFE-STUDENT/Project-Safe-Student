<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/dashboard.css">
    <title>Pesquisa</title>
    <script src="./js/sessao.js"></script>
</head>

<body onload="validarSessao()">
    <div class="content">
        <div class="menuLateral">
            <img src="./img/logo_SS.png">
            <div>
                <h1>Bem vindo<br>de volta!</h1>
            </div>
            <div id="opcoes_menu" class="opcao">
                <ul>
                    <li><a id="OpcSair" onclick="limparSessao()">Sair</a></li>
                </ul>
            </div>
        </div>
        <div id="veiculos" class="SelectDiv">
            <div class="selecoes">
                <h1> CLIQUE PARA INICIAR MONITORAMENTO </h1>
                <button onclick="BuscarDash()">Come√ßar Viagem</button>
                <div id="div_erro" class="mensagemErro">
                    <span id="span_mensagem_erro">
                    </span>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
<script>
    function BuscarDash() {
        window.location = './dashboard.html'
    }


    
    function encerrarViagem() {

let placa = sessionStorage.PLACA_VAN
let statusVar = 'rodando'

fetch("/dashboard/iniciarFinalizar", {
    method: "PUT",
    headers: {
        "Content-Type": "application/json"
    },
    body: JSON.stringify({
        placaVanServer: placa,
        statusServer: statusVar

    }),
})
    .then(function (resposta) {
        if (resposta.ok) {
            return resposta.json();
        } else {
            throw new Error("Houve um erro ao tentar trazer o resultado");
        }
    })
    .then(function (data) {
        // console.log(data);
        if (data.length === 0) {
            console.warn("Nenhum resultado encontrado");
            return;
        }

        // Muda o status da van para parado e volta para pagina de login

    })
    .catch(function (erro) {
        console.error(`#ERRO: ${erro}`);
    });
}

</script>